var empresas=[
    {
        empresa:"X-Box",
        email:"xbox@gmail.com",
        pais:"Estados Unidos",
        direccion:"Microsoft Redmond Campus, Redmond, Washington.",
        telefono:"900 94 8952",
        banner:"img/XBOX/Xbox-E3_header.jpg",
        logo:"img/Marcas/Xbox_logo.png",
        descripcion:"Xbox, o también llamada Xbox Clásica, Xbox Original y/o Primer Xbox . Es una videoconsola de sobremesa de sexta generación producida por Microsoft y la primera de esta empresa, en colaboración con Intel. Su principal característica es su procesador central basado en el procesador Intel Pentium III. El sistema también incorpora un lector de DVD, un disco duro interno, puerto ethernet y por último el sistema dispone de cuatro conectores para los mandos. Las unidades vendidas de este equipo fueron 24 000 000 consolas, según las cifras oficiales.",
        ll:{
            longitud:"23.532572",
            latitud:"12.345678"
        },
        sucursales:[],
        productos:[
            {
                producto:"Xbox One S All-Digital Edition",
                descripcion:"Pásate a lo digital con la consola Xbox One S All-Digital Edition y crea una biblioteca de juegos digitales que te acompaña vayas donde vayas y está disponible en la nube. Llévate tus partidas guardadas en la nube y disfruta de la capacidad de reservar y preinstalar los juegos disponibles próximamente para que puedas jugar a ellos en el momento de su lanzamiento. Amplía tus opciones con Xbox Game Pass, descubriendo y descargando más de 100 juegos fantásticos (la suscripción se vende por separado).1",
                foto:"img/XBOX/3.jpg",
                precio:"350",
                descuento:"30",
                valoracion:5,
                comentarios:[]
            },
            {
                producto:"Lámpara de Tungsteno",
                descripcion:"Pásate a lo digital con la consola Xbox One S All-Digital Edition y crea una biblioteca de juegos digitales que te acompaña vayas donde vayas y está disponible en la nube. Llévate tus partidas guardadas en la nube y disfruta de la capacidad de reservar y preinstalar los juegos disponibles próximamente para que puedas jugar a ellos en el momento de su lanzamiento. Amplía tus opciones con Xbox Game Pass, descubriendo y descargando más de 100 juegos fantásticos (la suscripción se vende por separado).1",
                foto:"img/XBOX/4.jpg",
                precio:"33",
                descuento:"30",
                valoracion:4,
                comentarios:[]
            },
            {
                producto:"Consola",
                descripcion:"Pásate a lo digital con la consola Xbox One S All-Digital Edition y crea una biblioteca de juegos digitales que te acompaña vayas donde vayas y está disponible en la nube. Llévate tus partidas guardadas en la nube y disfruta de la capacidad de reservar y preinstalar los juegos disponibles próximamente para que puedas jugar a ellos en el momento de su lanzamiento. Amplía tus opciones con Xbox Game Pass, descubriendo y descargando más de 100 juegos fantásticos (la suscripción se vende por separado).1",
                foto:"img/XBOX/2.jpg",
                precio:"205",
                descuento:"25",
                valoracion:2,
                comentarios:[]
            }
        ]
    },
    {
        empresa:"Dollfies Company",
        email:"xbox@gmail.com",
        pais:"Estados Unidos",
        direccion:"Microsoft Redmond Campus, Redmond, Washington.",
        telefono:"900 94 8952",
        banner:"img/bannersEmpresas/banner2-gate.jpg",
        logo:"img/Marcas/LEGO.jpg",
        descripcion:"Xbox, o también llamada Xbox Clásica, Xbox Original y/o Primer Xbox . Es una videoconsola de sobremesa de sexta generación producida por Microsoft y la primera de esta empresa, en colaboración con Intel. Su principal característica es su procesador central basado en el procesador Intel Pentium III. El sistema también incorpora un lector de DVD, un disco duro interno, puerto ethernet y por último el sistema dispone de cuatro conectores para los mandos. Las unidades vendidas de este equipo fueron 24 000 000 consolas, según las cifras oficiales.",
        ll:{
            longitud:"23.532572",
            latitud:"12.345678"
        },
        sucursales:[],
        productos:[
            {
                producto:"Dollfie 1",
                descripcion:"Pásate a lo digital con la consola Xbox One S All-Digital Edition y crea una biblioteca de juegos digitales que te acompaña vayas donde vayas y está disponible en la nube. Llévate tus partidas guardadas en la nube y disfruta de la capacidad de reservar y preinstalar los juegos disponibles próximamente para que puedas jugar a ellos en el momento de su lanzamiento. Amplía tus opciones con Xbox Game Pass, descubriendo y descargando más de 100 juegos fantásticos (la suscripción se vende por separado).1",
                foto:"img/DOLLFIES/images (2).jfif",
                precio:"350",
                descuento:"30",
                valoracion:5,
                comentarios:[]
            },
            {
                producto:"Dollfie 2",
                descripcion:"Pásate a lo digital con la consola Xbox One S All-Digital Edition y crea una biblioteca de juegos digitales que te acompaña vayas donde vayas y está disponible en la nube. Llévate tus partidas guardadas en la nube y disfruta de la capacidad de reservar y preinstalar los juegos disponibles próximamente para que puedas jugar a ellos en el momento de su lanzamiento. Amplía tus opciones con Xbox Game Pass, descubriendo y descargando más de 100 juegos fantásticos (la suscripción se vende por separado).1",
                foto:"img/DOLLFIES/07fffec892ec5fb7090fb12d0741a146.jpg",
                precio:"33",
                descuento:"30",
                valoracion:4,
                comentarios:[]
            },
            {
                producto:"Dollfie 3",
                descripcion:"Pásate a lo digital con la consola Xbox One S All-Digital Edition y crea una biblioteca de juegos digitales que te acompaña vayas donde vayas y está disponible en la nube. Llévate tus partidas guardadas en la nube y disfruta de la capacidad de reservar y preinstalar los juegos disponibles próximamente para que puedas jugar a ellos en el momento de su lanzamiento. Amplía tus opciones con Xbox Game Pass, descubriendo y descargando más de 100 juegos fantásticos (la suscripción se vende por separado).1",
                foto:"img/DOLLFIES/71rrhuDm8xL._AC_UL320_ML3_.jpg",
                precio:"205",
                descuento:"25",
                valoracion:2,
                comentarios:[]
            }
        ]
    },
    {
        empresa:"WARNER",
        email:"xbox@gmail.com",
        pais:"Estados Unidos",
        direccion:"Microsoft Redmond Campus, Redmond, Washington.",
        telefono:"900 94 8952",
        banner:"img/bannersEmpresas/home-banner01.jpg",
        logo:"img/Marcas/warner.png",
        descripcion:"Xbox, o también llamada Xbox Clásica, Xbox Original y/o Primer Xbox . Es una videoconsola de sobremesa de sexta generación producida por Microsoft y la primera de esta empresa, en colaboración con Intel. Su principal característica es su procesador central basado en el procesador Intel Pentium III. El sistema también incorpora un lector de DVD, un disco duro interno, puerto ethernet y por último el sistema dispone de cuatro conectores para los mandos. Las unidades vendidas de este equipo fueron 24 000 000 consolas, según las cifras oficiales.",
        ll:{
            longitud:"23.532572",
            latitud:"12.345678"
        },
        sucursales:[],
        productos:[
            {
                producto:"Andadora",
                descripcion:"Pásate a lo digital con la consola Xbox One S All-Digital Edition y crea una biblioteca de juegos digitales que te acompaña vayas donde vayas y está disponible en la nube. Llévate tus partidas guardadas en la nube y disfruta de la capacidad de reservar y preinstalar los juegos disponibles próximamente para que puedas jugar a ellos en el momento de su lanzamiento. Amplía tus opciones con Xbox Game Pass, descubriendo y descargando más de 100 juegos fantásticos (la suscripción se vende por separado).1",
                foto:"img/SEGURIDAD/accesorio_para_caminar.jpg",
                precio:"205",
                descuento:"22",
                valoracion:3,
                comentarios:[]
            },
            {
                producto:"Arnés de seguridad",
                descripcion:"Pásate a lo digital con la consola Xbox One S All-Digital Edition y crea una biblioteca de juegos digitales que te acompaña vayas donde vayas y está disponible en la nube. Llévate tus partidas guardadas en la nube y disfruta de la capacidad de reservar y preinstalar los juegos disponibles próximamente para que puedas jugar a ellos en el momento de su lanzamiento. Amplía tus opciones con Xbox Game Pass, descubriendo y descargando más de 100 juegos fantásticos (la suscripción se vende por separado).1",
                foto:"img/SEGURIDAD/arnes_de_seguridad_torax.jpg",
                precio:"205",
                descuento:"27",
                valoracion:2,
                comentarios:[]
            },
            {
                producto:"Arnés de seguridad",
                descripcion:"Pásate a lo digital con la consola Xbox One S All-Digital Edition y crea una biblioteca de juegos digitales que te acompaña vayas donde vayas y está disponible en la nube. Llévate tus partidas guardadas en la nube y disfruta de la capacidad de reservar y preinstalar los juegos disponibles próximamente para que puedas jugar a ellos en el momento de su lanzamiento. Amplía tus opciones con Xbox Game Pass, descubriendo y descargando más de 100 juegos fantásticos (la suscripción se vende por separado).1",
                foto:"img/SEGURIDAD/arnes_de_seguridad.jpg",
                precio:"2067",
                descuento:"70",
                valoracion:1,
                comentarios:[]
            },
            {
                producto:"Rodilleras",
                descripcion:"Pásate a lo digital con la consola Xbox One S All-Digital Edition y crea una biblioteca de juegos digitales que te acompaña vayas donde vayas y está disponible en la nube. Llévate tus partidas guardadas en la nube y disfruta de la capacidad de reservar y preinstalar los juegos disponibles próximamente para que puedas jugar a ellos en el momento de su lanzamiento. Amplía tus opciones con Xbox Game Pass, descubriendo y descargando más de 100 juegos fantásticos (la suscripción se vende por separado).1",
                foto:"img/SEGURIDAD/rodilleras.jfif",
                precio:"2067",
                descuento:"70",
                valoracion:1,
                comentarios:[]
            }
        ]
    }, 
    {
        empresa:"Data Science",
        email:"xbox@gmail.com",
        pais:"Estados Unidos",
        direccion:"Microsoft Redmond Campus, Redmond, Washington.",
        telefono:"900 94 8952",
        banner:"img/bannersEmpresas/7-74352_vocaloid-wallpaper-anime-kawaii.jpg",
        logo:"img/Marcas/data_science.jpg",
        descripcion:"Xbox, o también llamada Xbox Clásica, Xbox Original y/o Primer Xbox . Es una videoconsola de sobremesa de sexta generación producida por Microsoft y la primera de esta empresa, en colaboración con Intel. Su principal característica es su procesador central basado en el procesador Intel Pentium III. El sistema también incorpora un lector de DVD, un disco duro interno, puerto ethernet y por último el sistema dispone de cuatro conectores para los mandos. Las unidades vendidas de este equipo fueron 24 000 000 consolas, según las cifras oficiales.",
        ll:{
            longitud:"23.532572",
            latitud:"12.345678"
        },
        sucursales:[],
        productos:[
            {
                producto:"Vaso artístico",
                descripcion:"Pásate a lo digital con la consola Xbox One S All-Digital Edition y crea una biblioteca de juegos digitales que te acompaña vayas donde vayas y está disponible en la nube. Llévate tus partidas guardadas en la nube y disfruta de la capacidad de reservar y preinstalar los juegos disponibles próximamente para que puedas jugar a ellos en el momento de su lanzamiento. Amplía tus opciones con Xbox Game Pass, descubriendo y descargando más de 100 juegos fantásticos (la suscripción se vende por separado).1",
                foto:"img/KAWAII/vaso_artistico.jpg",
                precio:"500",
                descuento:"56",
                valoracion:5,
                comentarios:[]
            },
            {
                producto:"Muñeco de nieve",
                descripcion:"Pásate a lo digital con la consola Xbox One S All-Digital Edition y crea una biblioteca de juegos digitales que te acompaña vayas donde vayas y está disponible en la nube. Llévate tus partidas guardadas en la nube y disfruta de la capacidad de reservar y preinstalar los juegos disponibles próximamente para que puedas jugar a ellos en el momento de su lanzamiento. Amplía tus opciones con Xbox Game Pass, descubriendo y descargando más de 100 juegos fantásticos (la suscripción se vende por separado).1",
                foto:"img/KAWAII/muleco-de-nieve.jpg",
                precio:"2054",
                descuento:"40",
                valoracion:2,
                comentarios:[]
            },
            {
                producto:"Muñequita Alien",
                descripcion:"Pásate a lo digital con la consola Xbox One S All-Digital Edition y crea una biblioteca de juegos digitales que te acompaña vayas donde vayas y está disponible en la nube. Llévate tus partidas guardadas en la nube y disfruta de la capacidad de reservar y preinstalar los juegos disponibles próximamente para que puedas jugar a ellos en el momento de su lanzamiento. Amplía tus opciones con Xbox Game Pass, descubriendo y descargando más de 100 juegos fantásticos (la suscripción se vende por separado).1",
                foto:"img/KAWAII/kathie-olivas-encrusted-blue-greeter-150x184.jpg",
                precio:"697",
                descuento:"67",
                valoracion:4,
                comentarios:[]
            }
        ]
    }
];
function generarEmpresa(){
    var empresaG=Math.floor(Math.random()*(empresas.length-1) + 1)-1;
    document.getElementById("bannerEmpresa").innerHTML=`
    <img src="${empresas[empresaG].banner}" class="d-block w-100 visible-md visible-lg" alt="...">
    <div class="contenido-slider visible-md visible-lg text-center"><br>
        <a href="#" class="slider-btn  button">Editar perfil de la empresa</a>
    </div>                               
    `;
    document.getElementById("perfil-empresa").innerHTML=`
    <div class="container">
    <div class="row">
        <div class="cabecera-de-seccion col-md-12 text-center">
            <h2>${empresas[empresaG].empresa}</h2>
        </div> 
    </div>
    <div class="row">
        <div class="logo-perfil-empresa col-md-3 col-sm-6 col-lg-3">
            <div class="imagen-empresa-y-datos">
                <img src="${empresas[empresaG].logo}" alt="">
                <div class="logo-datos-empresa">
                    <h3>X-BOX</h3>
                    <span>Siguenos en nuestras redes sociales</span>
                    <ul class="social">
                        <li><a href="#" class="fa fa-facebook"></a></li>
                        <li><a href="#" class="fa fa-twitter"></a></li>
                        <li><a href="#" class="fa fa-linkedin"></a></li>
                    </ul>
                </div>
            </div> 
        </div>
        <div class="detalles-empresa col-md-9 col-lg-9 col-sm-6">
            <div>
                <h2>Datos generales</h2>
                <a href="#" class="fa fa-phone">&nbsp;&nbsp;&nbsp;${empresas[empresaG].telefono}</a><br>
                <a href="#" class="fa fa-location-arrow">&nbsp;&nbsp;&nbsp;Col. Yisoi, Huendae Prosel</a><br>
                <a href="#" class="fa fa-external-link">&nbsp;&nbsp;&nbsp;https://xbox.com/</a><br>
                <a href="#" class="fa fa-external-link">&nbsp;&nbsp;&nbsp;https://xbox.com/it-IT</a><br>
                <a href="#" class="fa fa-support">&nbsp;&nbsp;&nbsp;CD-R 700MB/DVD 4,7GB</a> <br>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="cabecera-de-seccion col-12 text-center">
            <h2>Sobre nuestra compañía</h2>
    </div>
    <div>
            <p id="mas-sobre-la-compania">
                ${empresas[empresaG].descripcion}
            </p>
        
    </div>
    </div>
    </div>
    `;

    document.getElementById("row-promociones-empresa").innerHTML="";
    for(let p=0;p<empresas[empresaG].productos.length; p++){
        document.getElementById("row-promociones-empresa").innerHTML+=`
        <div class="col-md-6 col-sm-6 col-lg-4 col-xs-6">
        <div class="card" style="background-color:transparent">
            <div class="item-producto card-img-top">
                <div class="imagen-producto">
                    <img src="${empresas[empresaG].productos[p].foto}" class="card-img-top" alt="...">
                </div>
                <div class="agregar-fav producto-item-contenido">
                    <div class="fav-content sucursal-overlay">
                        <a href="#" class="fa fa-trash-o" ></a>
                        <a href="#" class="fa fa-edit" ></a>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <h3 class="card-title">${empresas[empresaG].productos[p].producto}</h3>
                <img class="icono-nuevo-producto" src="img/icons8-new-50-2.png" alt="">${empresas[empresaG].productos[p].descuento}%
                <ul>
                            <li class="detalle-producto-con-promocion-empresa">
                                <a href="#" class="fa fa-database"></a>&nbsp;&nbsp;&nbsp;Precio:${empresas[empresaG].productos[p].precio}L
                            </li>
                            <li class="detalle-producto-con-promocion-empresa">
                                
                                <a href="#" class="fa fa-home"></a>
                                <span>
                                    &nbsp;&nbsp;&nbsp;Sucursales:
                                    <ol>
                                        <li><a href="#Tienda1">Tienda 1</a></li>
                                        <li><a href="#Tienda2">Tienda 2</a></li>
                                        <li><a href="#Tienda3">Tienda 3</a></li>
                                    </ol>
                                </span>
                            </li>
                        </ul>
                        <br><br><br><br>
                        <hr>
                        <center>
                            <a class="button MODAL-BUTTON " href="#popup1" onclick="generarPopUp(${empresaG},${p})">
                                ver detalles
                            </a>
                        </center>
                    </div>
                </div>
            </div> 
        `;

    };
    document.getElementById("agregarPromociones").innerHTML+=`
    <a href="#popup1" class="fa fa-plus-circle" onclick="agregarProducto(${empresaG})"></a>
    `
};
generarEmpresa();

/***PopUp formulario adicion producto */ 
function agregarProducto(e){
    document.getElementById("popup1").innerHTML=`
    <div class="content w-50 center-block">
        <div class="inscripcion-form detalles_producto text-left card container-fluid">
        <a class="close" href="#" class="float-right row">x</a>
        <h2>AGREGAR UN NUEVO PRODUCTO</h2>
        <form name="add-producto-form" id="add-producto-form">
            <div class="col-12 col-md-6 col-xs-12 col-lg-6 col-xl-6">
                <h3>Nombre del producto:</h3>
                <input name="nombre-producto" class="datos-p"type="text" id="nombre-producto" required>
                <h3> Descripción:</h3>
                <p>
                <input type="text" id="descripcion-producto" class="datos-p" onkeyup="generarCodigo()">
                </p>
                
                <h3>Precio: </h3>
                <p>
                    <input type="text" id="precio-producto" class="datos-p"name="precio-producto" required>
                </p>
                <h3>Descuento: </h3>
                <p>
                    <input type="text" id="descuento-producto" class="datos-p"name="descuento-producto" required>
                </p>
                <h3>Foto del producto</h3>
                <p>
                    <input type="file" name="foto-producto" class="datos-p" id="foto-producto" onloadeddata="mostrarImagen()">
                </p>
               
            
            </div>
           
            <div class="col-12 col-md-6 col-xs-12 col-lg-6 col-xl-6">
            <img src="https://chart.googleapis.com/chart?cht=qr&chl=fuera+JOH&chs=200x200"
            class="qr-code img-thumbnail img-responsive">
            </div>
            <div class="col-12 col-md-6 col-xs-12 col-lg-6 col-xl-6" id="imagen-subida" style="width:100px; height:auto;"></div>
                
            </form>
            <a>
                <input type="button"class="button"value="Crear promoción" id="inscribir-empresa" onclick="">
            </a>
            
        </div>
    </div>
    `
}
/**mostrar imagen de nuevo producto */
function mostrarImagen(){
    alert("no ojfjkfkf");
    imagen=document.getElementById("foto-producto").value;
    document.getElementById("imagen-subida").innerHTML=`
    <img src="${imagen}"
    class=" img-thumbnail img-responsive">
    `;
}

/***GENERAR CÓDIGO QR */ 
function generarCodigo(){
    $(".qr-code").attr("src", "https://chart.googleapis.com/chart?cht=qr&chl=" + $("#descripcion-producto").val() + "&chs=200x200");
};
/*****generar popUp */
function generarPopUp(e,p){
    var cs=5-empresas[e].productos[p].valoracion;
    var cods="";
    for(let s=0; s<empresas[e].productos[p].valoracion; s++){
        cods+=`<i class="fa fa-star"></i>`;
    }
    for(let s=0; s<cs; s++){
        cods+=`<i class="fa fa-star-o"></i>`;
    }                      
    var nuevoprecio= empresas[e].productos[p].precio - ((parseInt(empresas[e].productos[p].descuento , 10))/100)*parseInt(empresas[e].productos[p].precio);       
    document.getElementById("popup1").innerHTML=`
    <div class="popup">
            <div class="content">
                <br>
                <a class="close" href="#">x</a>
                <h2>${empresas[e].productos[p].producto}</h2>
                <div class="container-fluid detalles_producto">
                    <div class="row">
                        <div class="col-6 col-xs-6 col-sm-6 col-md-6 collg-6 col-xl-6">
                            <h3>Empresa: </h3><p class="information">${empresas[e].empresa}</p>
                            <h3>Precio: </h3><p class="information">${empresas[e].productos[p].precio}L</p>
                            <h3>Descuento: </h3><p class="information">${empresas[e].productos[p].descuento}%</p>
                            <h3>Pago total: </h3><p class="information">${nuevoprecio}L</p>
                        </div>
                        <div class="col-6 col-xs-6 col-sm-6 col-md-6 collg-6 col-xl-6">
                            <div class="product-image">
                                <img src="${empresas[e].productos[p].foto}">
                            </div>
                            <div>
                                <span class="estrellas" id="">${cods}
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    `;
};
